---
title: Redis的发布和订阅
date: 2023-08-21 21:48:07
permalink: /pages/f08941/
categories:
  - database
  - Redis
tags:
  - 
---
## 一、什么是发布和订阅
Redis 发布订阅 (pub/sub) 是一种消息通信模式：发送者 (pub) 发送消息，订阅者 (sub) 接收消息。
Redis 客户端可以订阅任意数量的频道。

## 二、Redis的发布和订阅
1、客户端可以订阅频道如下图
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2659116/1640701053643-81bd7185-a994-462b-a02e-5d91fcca75e2.png#clientId=u18859d99-6bd6-4&from=paste&height=144&id=uf4c1aaae&originHeight=288&originWidth=693&originalType=binary&ratio=1&rotation=0&showTitle=false&size=800013&status=done&style=none&taskId=u149bfbe3-4755-4cca-a4b7-51515f8dc65&title=&width=346.5)
2、当给这个频道发布消息后，消息就会发送给订阅的客户端
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2659116/1640701066896-776bb663-fc57-466c-adc1-cedc6408ce6d.png#clientId=u18859d99-6bd6-4&from=paste&height=203&id=u4279078f&originHeight=405&originWidth=629&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1021133&status=done&style=none&taskId=ue7492028-6b8d-40ae-bf87-2363a9f2bcf&title=&width=314.5)
## 三、发布订阅命令行实现
1、 打开一个客户端订阅channel1
```shell
SUBSCRIBE channel1
```
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2659116/1640701362167-67c55f7c-3d87-4201-bca4-194ed6c8a4f5.png#clientId=u64987731-19fc-4&from=paste&height=107&id=ucc8d0360&originHeight=213&originWidth=972&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12152&status=done&style=none&taskId=uedaa16b3-acfe-4ef1-b37e-78694ab1c00&title=&width=486)
2、打开另一个客户端，给channel1发布消息hello
```shell
publish channel1 hello
```
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2659116/1640701473643-c83e2f56-33df-490e-8ad8-935b2b903b20.png#clientId=u64987731-19fc-4&from=paste&height=137&id=u5b2924f7&originHeight=274&originWidth=1197&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23269&status=done&style=none&taskId=u4cc1bfaa-9d5a-4778-adc9-2bc0cfe818d&title=&width=598.5)
第一次频道名写错啦，接收失败，第二次成功。
![image.png](https://cdn.nlark.com/yuque/0/2021/png/2659116/1640701539672-39b70ad3-2d33-427c-b6c8-ca371950a0e2.png#clientId=u64987731-19fc-4&from=paste&height=198&id=u8ae7fcb4&originHeight=395&originWidth=981&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34027&status=done&style=none&taskId=u01c8ddb7-ecd6-4b7a-a2c5-f2ac7d68977&title=&width=490.5)
